{{> layout/headerMap}}

<body>

{{> layout/navbar}}
<div class="container">
    <h1>Ajouter un jeu</h1>

    <form method="POST" name="game" action="    /addAsso">
        <label>Nom</label>
        <input type="text" name ="name" autofocus="true" placeholder="Nom" required/>

        <br>
        <label>description</label>
        <input type="text" name="description" placeholder="Description" required/>

        <br>
        <label>Location</label>
        <input id="longitude" type="hidden" name="longitude" required/>
        <input id="latitude" type="hidden" name="latitude" required/>
        <div id="map"></div>
        <br>
        <button type="submit">Valider</button>

    </form>
</div>
</body>
<script>
    var marker;
    var mymap;
    function initMap() {
        mymap = L.map('map').setView([51.505, -0.09], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>'
        }).addTo(mymap);
        mymap.addEventListener("click", addMarker);
    }
    function addMarker(e) {
        // Add marker to map at click location; add popup window
        if (marker !== undefined) {
            mymap.removeLayer(marker);
        }
        marker = new L.marker(e.latlng).addTo(mymap);
        var longitude = document.getElementById("longitude");
        var latitude = document.getElementById("latitude");
        latitude.value = e.latlng.lat;
        longitude.value = e.latlng.lng;
    }

    window.addEventListener("load",initMap);
</script>
</html>